<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        
    </head>
    <body>
        <div id = "container_out"></div>
    </body>
    <script>
        var Loan = function(date1,amount,perc_paid, perc_not_paid){
        this.date1 = date1
        this.amount = amount
        this.perc_paid = perc_paid
        this.perc_not_paid = perc_not_paid
        }

        loans = []

        const container_out = document.getElementById("container_out")
        container = document.createElement("div")
        container.setAttribute("class", "container")
        container_out.appendChild(container)
        const make_loan_div = document.createElement("div")
        container.appendChild(make_loan_div)
        make_loan_div.setAttribute("class", "buttons")
        const low_risk = document.createElement("button")
        low_risk.addEventListener("click" ,function(){make_loan("15December2020", 1000000000, 3, 20)})
        make_loan_div.appendChild(low_risk)
        const high_risk = document.createElement("button")
        high_risk.addEventListener("click" ,function(){make_loan("15November2020", 2000000000, 6, 40)})
        make_loan_div.appendChild(high_risk)
        
        const show_loans = document.createElement("div")
        show_loans.setAttribute("class", "loans")
        container.appendChild(show_loans)
        const list = document.createElement("ul")
        show_loans.appendChild(list)
        for(let i= 0;i<5;i++){
            const loan = document.createElement("li")
            loan.setAttribute("id", "loan"+i)
            list.appendChild(loan)
        }
        
        

        make_loan = (date1,amount, interests_paid, interests_not_paid) => {
            if (loans.length < 5){
                this.health_funds += amount
                perc = amount/1935000000000
                perc_paid = perc * interests_paid/100
                perc_not_paid = perc * interests_not_paid/100
                this.loans.push(new Loan(date1,amount, perc_paid, perc_not_paid))
            }
            else{
                console.log("hai gia 5 prestiti")
            }
            console.log(loans)
            update()
        }

        pay_loan = (loan) => {
            pil -= stato.loans[loan].perc_not_paid
            index = stato.loans.indexOf(loan)
            stato.loans.splice(index, 1)
        }
        



        
        update = () => {
            Object.keys(loans).forEach(key =>{
                const loan = document.getElementById("loan"+key)
                loan.innerHTML = "scadenza: " + loans[key].date1 + "soldi: " + loans[key].amount + "interessi: " + loans[key].perc_paid + "interessi se non paghi: " + loans[key].perc_not_paid
            })
        }


        /*$(button).attr({
                    "class":"btn btn-secondary dropdown-toggle", "type" : "button", "id" : "dropdownMenuButton", "data-toggle" : "dropdown", "aria-haspopup" : "true", "aria-expanded" : "false"  
                })*/
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</html>




